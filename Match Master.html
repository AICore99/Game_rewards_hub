<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="https://i.imgur.com/OcjsbYF.png" type="image/png" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Match Master Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: 'Luckiest Guy', cursive;
            background: #fff5cc;
            margin: 0;
            padding: 0;
            color: #8c2a02;
        }
        header {
            position: relative;
            background: url('https://i.imgur.com/du1o4gd.jpeg') no-repeat center top;
            background-size: cover;
            height: 50vh;
            width: 100%;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            text-align: center;
            padding-bottom: 20px;
        }
        header h1 {
            background-color: rgba(0, 0, 0, 0.7);
            padding: 12px 30px;
            border-radius: 12px;
            font-size: 32px;
            color: #ffffff;
            animation: glow 2.5s ease-in-out infinite alternate;
            transition: transform 0.3s ease-in-out;
        }
        header h1:hover {
            transform: scale(1.05);
        }
        .coin-text {
            color: #ffcc00;
            text-shadow: 0 0 5px #ffcc00, 0 0 10px #ffcc00;
            animation: coinGlow 3s ease-in-out infinite alternate;
        }
        .master-text {
            color: #ff3300;
            text-shadow: 0 0 5px #ff3300, 0 0 10px #ff3300;
            animation: masterGlow 3s ease-in-out infinite alternate;
        }
        @keyframes glow {
            0% {
                text-shadow:
                    0 0 5px #ffcc00,
                    0 0 10px #ffcc00,
                    0 0 15px #ffcc00,
                    0 0 20px #ff3300,
                    0 0 30px #ff3300,
                    0 0 40px #ff3300;
            }
            100% {
                text-shadow:
                    0 0 2px #ffcc00,
                    0 0 5px #ffcc00,
                    0 0 10px #ffcc00,
                    0 0 15px #ff3300,
                    0 0 20px #ff3300,
                    0 0 30px #ff3300;
            }
        }
        @keyframes coinGlow {
            0% { text-shadow: 0 0 5px #ffcc00, 0 0 10px #ffcc00; }
            100% { text-shadow: 0 0 10px #ffcc00, 0 0 20px #ffd700; }
        }
        @keyframes masterGlow {
            0% { text-shadow: 0 0 5px #ff3300, 0 0 10px #ff3300; }
            100% { text-shadow: 0 0 10px #ff3300, 0 0 20px #ff0000; }
        }

        .content {
            max-width: 850px;
            margin: auto;
            padding: 20px;
        }

        .reward-day-box {
            background: #fff2b3;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.3);
        }

        .reward-date {
            color: #d35400;
            font-size: 26px;
            margin-bottom: 10px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        .new-reward-box {
            display: flex;
            align-items: center;
            gap: 20px;
            background: #fffdf2;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            margin: 10px 0;
        }

        .new-reward-box img {
            width: 70px;
            animation: spinPop 2s infinite ease-in-out;
        }

        .reward-amount {
            font-size: 20px;
            font-weight: bold;
            color: #c0392b;
            margin: 5px 0;
        }

        .new-btn-collect {
            background: linear-gradient(to right, #f9d423, #ff4e50);
            border: none;
            padding: 10px 20px;
            color: white;
            font-size: 16px;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Luckiest Guy', cursive;
            animation: pulse 1.5s infinite;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 4px 10px rgba(255, 78, 80, 0.4);
        }

        .new-btn-collect:hover {
            transform: scale(1.1);
        }

        .new-btn-collect:disabled {
            background: gray;
            cursor: default;
            animation: none;
        }

        .click-count {
            font-size: 14px;
            color: #5c3a00;
        }

        @keyframes spinPop {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.05) rotate(3deg); }
            100% { transform: scale(1) rotate(-3deg); }
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255,153,0,0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255,153,0,0); }
            100% { box-shadow: 0 0 0 0 rgba(255,153,0,0); }
        }

        /* Load More Button Styles */
        #load-more-container {
            text-align: center;
            margin-top: 20px;
        }

        #load-more-btn {
            background: #f9d423;
            border: none;
            padding: 12px 25px;
            color: #8c2a02;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Luckiest Guy', cursive;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 4px 10px rgba(249, 212, 35, 0.4);
            /* Add new animation */
            animation: loadMoreGlow 2s infinite alternate;
        }

        #load-more-btn:hover {
            transform: scale(1.05);
            background: #ffcc00;
            /* More pronounced shadow on hover */
            box-shadow: 0 8px 15px rgba(249, 212, 35, 0.6);
        }

        #load-more-btn:active {
            /* Press down effect */
            transform: translateY(2px) scale(1.03);
            box-shadow: 0 2px 5px rgba(249, 212, 35, 0.4);
        }

        #load-more-btn:disabled {
            background: #cccccc;
            cursor: default;
            box-shadow: none;
            color: #666666;
            /* Stop animation when disabled */
            animation: none;
        }

        /* New Keyframes for Load More Button Glow */
        @keyframes loadMoreGlow {
            0% { box-shadow: 0 4px 10px rgba(249, 212, 35, 0.4); }
            100% { box-shadow: 0 4px 15px rgba(249, 212, 35, 0.8), 0 0 5px rgba(255, 204, 0, 0.6); }
        }


        /* Tutorial & FAQ styles */
        #tutorial-faq-container {
            max-width: 850px;
            margin: 40px auto 80px auto;
            padding: 20px;
            background: #fff9e6;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.3);
            color: #8c2a02;
            font-size: 16px;
        }

        #tutorial-faq-container h2 {
            font-size: 28px;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(255, 153, 0, 0.7);
        }

        #tutorial-faq-container ol {
            padding-left: 20px;
            line-height: 1.6;
        }

        #tutorial-faq-container dl {
            margin-top: 10px;
            border-top: 1px solid #f2d680;
            padding-top: 15px;
        }

        #tutorial-faq-container dt {
            margin-top: 15px;
            font-weight: bold;
            color: #c0392b;
        }

        #tutorial-faq-container dd {
            margin-left: 20px;
            margin-top: 5px;
            color: #5c3a00;
            line-height: 1.4;
        }

        @media (max-width: 480px) {
            header h1 {
                font-size: 24px;
                padding: 8px 15px;
            }
            .reward-date {
                font-size: 20px;
            }
            .reward-amount {
                font-size: 18px;
            }
            .new-reward-box img {
                width: 50px;
            }
            .new-btn-collect {
                font-size: 14px;
                padding: 8px 15px;
            }
            #load-more-btn {
                font-size: 16px;
                padding: 10px 20px;
            }
        }
    </style>
</head>
<body>

    <div style="text-align:center; margin: 10px auto;">
        <script type="text/javascript">
            atOptions = {
                'key' : 'f77bf009f37c1af18a071c4c35824cb8',
                'format' : 'iframe',
                'height' : 50,
                'width' : 320,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/f77bf009f37c1af18a071c4c35824cb8/invoke.js"></script>
    </div>

    <header>
        <h1><span class="coin-text">Match</span> <span class="master-text">Master</span> Daily Free Booster</h1>
    </header>

    <div class="content" id="rewards-container"></div>
    <div id="load-more-container" class="content" style="display: none;">
        <button id="load-more-btn">Load More Old Rewards</button>
    </div>


    <div class="content" id="tutorial-faq-container">
        <section id="tutorial">
            <h2>🎮 Match Master Game Tutorial</h2>
            <ol>
                <li><strong>Start Matching:</strong> Begin by playing a match-3 puzzle game against real opponents in real time.</li>
                <li><strong>Use Boosters:</strong> Pick the best booster before each match to increase your chances of winning.</li>
                <li><strong>Score Points:</strong> Match 3 or more identical items to earn points and activate combos.</li>
                <li><strong>Win Trophies:</strong> Defeat your opponent by scoring more points before time runs out to win trophies and progress in the leaderboard.</li>
                <li><strong>Join Events:</strong> Participate in daily events and tournaments for exclusive rewards.</li>
                <li><strong>Upgrade Boosters:</strong> Collect and upgrade boosters to unlock powerful abilities and special moves.</li>
                <li><strong>Use Daily Rewards:</strong> Visit this site daily to claim free boosters and coins to stay competitive!</li>
            </ol>
        </section>

        <section id="faq" style="margin-top: 40px;">
            <h2>❓ Frequently Asked Questions (FAQ)</h2>
            <dl>
                <dt><strong>Q1: How do I use the free booster links?</strong></dt>
                <dd>A1: Just click the “Collect Now” button next to each reward. It will open a new tab where you can claim your free booster or coins in Match Master.</dd>

                <dt><strong>Q2: Are these rewards safe to use?</strong></dt>
                <dd>A2: Yes! The links are gathered from official or trusted sources and are updated daily.</dd>

                <dt><strong>Q3: Can I collect rewards from past days?</strong></dt>
                <dd>A3: Absolutely. You can still claim the boosters from previous days if they haven’t expired yet.</dd>

                <dt><strong>Q4: Why don’t I see today’s rewards?</strong></dt>
                <dd>A4: Sometimes the rewards are updated later in the day. If today’s bonus isn’t available yet, check back in a few hours.</dd>

                <dt><strong>Q5: How do I get more boosters and coins?</strong></dt>
                <dd>A5: Play regularly, win matches, participate in events, and come here every day to claim your free boosters!</dd>
            </dl>
        </section>
    </div>

    <div style="text-align:center; margin: 30px auto;">
        <script type="text/javascript">
            atOptions = {
                'key' : 'f77bf009f37c1af18a071c4c35824cb8',
                'format' : 'iframe',
                'height' : 50,
                'width' : 320,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/f77bf009f37c1af18a071c4c35824cb8/invoke.js"></script>
    </div>

    <footer style="text-align: center; padding: 20px; background: #ffe066; font-weight: bold;">
        © 2025 Match Master Daily | <a href="#">Privacy</a> | <a href="#">Terms</a> | <a href="#">Contact</a>
    </footer>

    <script>
        // CORRECTED Google Sheet URL for CSV export
        const sheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTTXL6_fDByocyjs2dfyNNqSSRU_BM86Sys7e8xRqcd2eUX36QZcd1dAV818hxLgSeSvUAw55eLUV26/pub?output=csv';

        let allRewards = [];
        let displayedRewardCount = 0;
        const rewardsPerLoad = 2;

        async function fetchRewards() {
            try {
                const res = await fetch(sheetURL);
                const text = await res.text();
                const rows = text.split('\n').slice(1).map(line => line.split(','));
                allRewards = rows.map(row => {
                    // Check if row has enough columns before accessing
                    if (row.length < 3) return null; 
                    const gifts = parseInt(row[0]);
                    const date = row[1]?.trim();
                    const link = row[2]?.trim();
                    if (isNaN(gifts) || !date || !link) return null; // Ensure gifts is a number
                    return { gifts, date, link };
                }).filter(Boolean); // Filter out any null entries from malformed rows

                allRewards.sort((a, b) => new Date(b.date) - new Date(a.date));
                renderInitialRewards();
            } catch (e) {
                console.error("Error fetching Google Sheet:", e);
                document.getElementById('rewards-container').innerHTML =
                    "<p style='text-align:center; color:red;'>❌ Error loading rewards. Please ensure the Google Sheet is published to the web as CSV.</p>";
            }
        }

        function getDateLabel(dateStr) {
            const rewardDate = new Date(dateStr);
            const today = new Date();
            // REMOVE this line below for a live site to use the actual current date
            today.setFullYear(2025, 6, 11); // Static for testing purposes (July 11, 2025)
            
            const yesterday = new Date(today);
            yesterday.setDate(today.getDate() - 1);
            const twoDaysAgo = new Date(today);
            twoDaysAgo.setDate(today.getDate() - 2);

            function zero(d) {
                return new Date(d.getFullYear(), d.getMonth(), d.getDate());
            }

            const reward = zero(rewardDate).getTime();
            const now = zero(today).getTime();
            if (reward === now) return "Today";
            if (reward === zero(yesterday).getTime()) return "Yesterday";
            if (reward === zero(twoDaysAgo).getTime()) return "Two Days Ago";
            return rewardDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
        }

        // Helper function to group rewards by their date label (Today, Yesterday, etc.)
        function groupRewardsByDate(rewards) {
            const grouped = {};
            rewards.forEach(reward => {
                const dateLabel = getDateLabel(reward.date);
                if (!grouped[dateLabel]) {
                    grouped[dateLabel] = [];
                }
                grouped[dateLabel].push(reward);
            });
            return grouped;
        }

        // Renders a batch of rewards onto the page
        function renderRewards(rewardsToRender) {
            const container = document.getElementById('rewards-container');
            const grouped = groupRewardsByDate(rewardsToRender);

            // Get the unique date labels (e.g., "Today", "Yesterday", "July 10, 2025") from this batch
            const keys = Object.keys(grouped);

            // Sort these keys to ensure correct display order: Today, Yesterday, Two Days Ago, then chronological
            keys.sort((a, b) => {
                const order = { "Today": 0, "Yesterday": 1, "Two Days Ago": 2 };
                const aOrder = order[a] !== undefined ? order[a] : Infinity; // Assign high value for regular dates
                const bOrder = order[b] !== undefined ? order[b] : Infinity;

                if (aOrder !== Infinity || bOrder !== Infinity) {
                    return aOrder - bOrder; // Sort "Today", "Yesterday", "Two Days Ago"
                }
                // For other dates, parse and sort chronologically descending
                return new Date(b) - new Date(a);
            });

            keys.forEach(dateLabel => {
                // Create a unique ID for each reward day box to prevent re-rendering existing ones on 'Load More'
                const dayBoxId = `rewards-for-${dateLabel.replace(/\s/g, '-').replace(/,/g, '')}`;
                if (document.getElementById(dayBoxId)) {
                    // If a box for this date already exists, skip rendering it again
                    return;
                }

                const dayBox = document.createElement('div');
                dayBox.className = 'reward-day-box';
                dayBox.id = dayBoxId; // Assign the unique ID

                let dayHTML = `<h2 class="reward-date">${dateLabel}</h2>`;
                grouped[dateLabel].forEach(reward => {
                    dayHTML += `
                        <div class="new-reward-box">
                            <img src="https://i.imgur.com/DgLwYoU.png" alt="${reward.gifts} gifts" />
                            <div>
                                <p class="reward-amount">${reward.gifts} Daily Free Gifts</p>
                                <button class="new-btn-collect" onclick="handleCollect(this, '${reward.link}')">🎁 Collect Now</button>
                                <p class="click-count">Not clicked</p>
                            </div>
                        </div>
                    `;
                });
                dayBox.innerHTML = dayHTML; // Set innerHTML after building content
                container.appendChild(dayBox); // Append the completed day box to the container
            });
        }

        // Renders the initial set of rewards (typically the latest 3 days)
        function renderInitialRewards() {
            const container = document.getElementById('rewards-container');
            container.innerHTML = ''; // Clear any existing content on initial load

            // Get unique dates from all fetched rewards, sorted descending
            const uniqueDates = [...new Set(allRewards.map(reward => reward.date))].sort((a, b) => new Date(b) - new Date(a));

            // Select the latest 3 unique dates for initial display
            const latestThreeDates = uniqueDates.slice(0, 3);
            const initialRewards = allRewards.filter(reward => latestThreeDates.includes(reward.date));

            renderRewards(initialRewards); // Render these initial rewards

            // Identify dates that are older than the initial 3
            const olderDates = uniqueDates.slice(3);
            
            // Store the human-readable labels for these older dates to manage 'Load More'
            window.olderDateKeys = olderDates.map(dateStr => getDateLabel(dateStr));
            // Filter out any potential duplicates from getDateLabel if different raw dates map to same label (unlikely with YYYY-MM-DD)
            window.olderDateKeys = [...new Set(window.olderDateKeys)]; 
            window.olderDateKeys.sort((a, b) => new Date(b) - new Date(a)); // Re-sort for proper load order

            if (window.olderDateKeys.length > 0) {
                document.getElementById('load-more-container').style.display = 'block';
                displayedRewardCount = 0; // Reset counter for older rewards for the 'Load More' button logic
                updateLoadMoreButton();
            } else {
                document.getElementById('load-more-container').style.display = 'none';
            }
        }

        // Loads more older rewards when the "Load More" button is clicked
        function loadMoreRewards() {
            const loadMoreBtn = document.getElementById('load-more-btn');
            loadMoreBtn.disabled = true; // Disable button to prevent multiple clicks

            const rewardsToDisplay = [];
            let datesAdded = 0;

            // Iterate through the pre-sorted olderDateKeys
            for (let i = displayedRewardCount; i < window.olderDateKeys.length && datesAdded < rewardsPerLoad; i++) {
                const dateKey = window.olderDateKeys[i];
                // Find all rewards from the original `allRewards` array that match this date label
                const rewardsForDate = allRewards.filter(reward => getDateLabel(reward.date) === dateKey);
                rewardsToDisplay.push(...rewardsForDate);
                datesAdded++;
            }

            renderRewards(rewardsToDisplay); // Append these new rewards to the page

            displayedRewardCount += datesAdded; // Update the count of displayed older dates
            updateLoadMoreButton(); // Update button state
        }

        // Updates the text and disabled state of the "Load More" button
        function updateLoadMoreButton() {
            const loadMoreBtn = document.getElementById('load-more-btn');
            if (displayedRewardCount >= window.olderDateKeys.length) {
                loadMoreBtn.textContent = "No More Old Rewards";
                loadMoreBtn.disabled = true;
            } else {
                loadMoreBtn.textContent = "Load More Old Rewards";
                loadMoreBtn.disabled = false;
            }
        }

        // Handles the "Collect Now" button click, opens link, updates status
        function handleCollect(button, url) {
            window.open(url, '_blank', 'noopener,noreferrer'); // Open link in new tab securely
            const parent = button.closest('.new-reward-box');
            const clickDisplay = parent.querySelector('.click-count');
            const now = new Date();
            // Format current time for display
            const timeStr = now.getFullYear() + "-" +
                            String(now.getMonth() + 1).padStart(2, '0') + "-" +
                            String(now.getDate()).padStart(2, '0') + " " +
                            String(now.getHours()).padStart(2, '0') + ":" +
                            String(now.getMinutes()).padStart(2, '0') + ":" +
                            String(now.getSeconds()).padStart(2, '0');
            clickDisplay.textContent = `Clicked at: ${timeStr}`;
            button.textContent = "✅ Collected"; // Change button text
            button.disabled = true; // Disable button after click
        }

        // Event listener to fetch rewards when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            const loadMoreBtn = document.getElementById('load-more-btn');
            if (loadMoreBtn) {
                loadMoreBtn.addEventListener('click', loadMoreRewards);
            }
            fetchRewards(); // Initiate fetching of rewards
        });

    </script>
    <script type='text/javascript' src='//pl27099326.profitableratecpm.com/a9/6d/40/a96d40e2346b8e81135462c44f3b94c2.js'></script>
</body>
</html>